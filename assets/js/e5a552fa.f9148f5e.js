"use strict";(self.webpackChunksquirrels_docs=self.webpackChunksquirrels_docs||[]).push([[7323],{6248:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>r,metadata:()=>o,toc:()=>c});var s=n(5893),i=n(1151);const r={sidebar_position:2},a="2. Configure the Squirrels Project File",o={id:"tutorial/project-file",title:"2. Configure the Squirrels Project File",description:"Go to the squirrels.yml file. This is the Squirrels project file to configure most of the properties of the Squirrels project in [yaml].",source:"@site/docs/tutorial/2-project-file.md",sourceDirName:"tutorial",slug:"/tutorial/project-file",permalink:"/docs/tutorial/project-file",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"1. Create a Sample Project",permalink:"/docs/tutorial/initialize"},next:{title:"3. Create the Dataset Parameters",permalink:"/docs/tutorial/parameters"}},l={},c=[{value:"Setting the Project Variables",id:"setting-the-project-variables",level:2},{value:"Setting the Database Connections",id:"setting-the-database-connections",level:2},{value:"Defining the Datasets",id:"defining-the-datasets",level:2}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,i.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.h1,{id:"2-configure-the-squirrels-project-file",children:"2. Configure the Squirrels Project File"}),"\n",(0,s.jsxs)(t.p,{children:["Go to the ",(0,s.jsx)(t.code,{children:"squirrels.yml"})," file. This is the Squirrels project file to configure most of the properties of the Squirrels project in ",(0,s.jsx)(t.a,{href:"https://yaml.org/",children:"yaml"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["In this tutorial, we will focus on the ",(0,s.jsx)(t.strong,{children:"project_variables"}),", ",(0,s.jsx)(t.strong,{children:"connections"}),", and ",(0,s.jsx)(t.strong,{children:"datasets"})," sections."]}),"\n",(0,s.jsx)(t.h2,{id:"setting-the-project-variables",children:"Setting the Project Variables"}),"\n",(0,s.jsxs)(t.p,{children:["The project variables ",(0,s.jsx)(t.strong,{children:"name"})," and ",(0,s.jsx)(t.strong,{children:"major_version"})," are required. The ",(0,s.jsx)(t.strong,{children:"label"})," is optional, and will use the ",(0,s.jsx)(t.strong,{children:"name"})," if not specified. In additional to those, you are free to add any of your own project variable."]}),"\n",(0,s.jsxs)(t.p,{children:["In this tutorial, we will be making dataset APIs related to historical weather data. Change the ",(0,s.jsx)(t.strong,{children:"name"})," to ",(0,s.jsx)(t.code,{children:"weather"})," and ",(0,s.jsx)(t.strong,{children:"label"})," to ",(0,s.jsx)(t.code,{children:"Weather Analytics"})," (we will leave ",(0,s.jsx)(t.strong,{children:"major_version"})," as is)."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"project_variables"})," section should now look like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"project_variables:\n  name: weather\n  label: Weather Analytics\n  major_version: 1\n"})}),"\n",(0,s.jsx)(t.h2,{id:"setting-the-database-connections",children:"Setting the Database Connections"}),"\n",(0,s.jsxs)(t.p,{children:["This section is where we set all the database connection details that we need. We provide a list of connection names here and refer to them in other files. The connection name ",(0,s.jsx)(t.code,{children:"default"})," must be provided for models that don't set a connection name explicitly."]}),"\n",(0,s.jsxs)(t.p,{children:["Under ",(0,s.jsx)(t.code,{children:"default"}),", change the url to ",(0,s.jsx)(t.code,{children:"sqlite:///./database/weather.db"}),"."]}),"\n",(0,s.jsx)(t.admonition,{type:"tip",children:(0,s.jsxs)(t.p,{children:["You can also use the ",(0,s.jsx)(t.a,{href:"https://jinja.palletsprojects.com/",children:"Jinja"}),"'s double curly brackets syntax to substitute environment variables defined in the ",(0,s.jsx)(t.code,{children:"environcfg.yml"})," file."]})}),"\n",(0,s.jsxs)(t.p,{children:["The syntax for the URL uses ",(0,s.jsx)(t.a,{href:"https://docs.sqlalchemy.org/en/20/core/engines.html#database-urls",children:"sqlalchemy database URLs"}),". Since sqlite databases don't require a username and password, the ",(0,s.jsx)(t.strong,{children:"credential"})," field can be either set to null or omitted entirely. More details on setting and using credential keys and connections can be found at ",(0,s.jsx)(t.a,{href:"../topics/database",children:"Configure Database Connections"}),"."]}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"connections"})," section should now look like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"connections:\n  - name: default\n    credential: null\n    url: sqlite:///./database/weather.db\n"})}),"\n",(0,s.jsx)(t.h2,{id:"defining-the-datasets",children:"Defining the Datasets"}),"\n",(0,s.jsx)(t.p,{children:'This section is where we define the attributes for all datasets created by the Squirrels project. Every dataset defined will have their own "parameters API" and "dataset API".'}),"\n",(0,s.jsxs)(t.p,{children:["Change the first dataset name to ",(0,s.jsx)(t.code,{children:"weather_by_time"})," and label to ",(0,s.jsx)(t.code,{children:"Weather by Time of Year"}),'. Remove all parameters except "group_by", and rename it to "group_by_dim". Fields ',(0,s.jsx)(t.strong,{children:"scope"})," and ",(0,s.jsx)(t.strong,{children:"traits"})," can be omitted."]}),"\n",(0,s.jsx)(t.p,{children:"Remove the second dataset."}),"\n",(0,s.jsxs)(t.p,{children:["The ",(0,s.jsx)(t.strong,{children:"datasets"})," section should now look like this:"]}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-yaml",children:"datasets:\n  - name: weather_by_time\n    label: Weather by Time of Year\n    parameters:\n      - group_by_dim\n"})}),"\n",(0,s.jsxs)(t.p,{children:["Every dataset name that's set in the ",(0,s.jsx)(t.strong,{children:"datasets"})," section must also have a matching file name somewhere in ",(0,s.jsx)(t.code,{children:"models"})," folder (unless a ",(0,s.jsx)(t.strong,{children:"model"})," field is specified). At this point, we can rename the models files:"]}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.code,{children:"models/federates"})," folder, rename ",(0,s.jsx)(t.code,{children:"dataset_example.sql"})," to ",(0,s.jsx)(t.code,{children:"weather_by_time.sql"}),"."]}),"\n",(0,s.jsxs)(t.li,{children:["In the ",(0,s.jsx)(t.code,{children:"models/dbviews"})," folder, rename ",(0,s.jsx)(t.code,{children:"database_view1.sql"})," to ",(0,s.jsx)(t.code,{children:"aggr_weather_metrics.sql"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(t.p,{children:["More details on the Squirrels project file can be found at ",(0,s.jsx)(t.a,{href:"../topics/project-file",children:"Squirrels Project File"}),"."]})]})}function h(e={}){const{wrapper:t}={...(0,i.a)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>o,a:()=>a});var s=n(7294);const i={},r=s.createContext(i);function a(e){const t=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),s.createElement(r.Provider,{value:t},e.children)}}}]);